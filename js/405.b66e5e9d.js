"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[405],{7405:function(e,l,a){a.r(l),a.d(l,{default:function(){return Ze}});var t=a(6252),i=a(3577);const r=e=>((0,t.dD)("data-v-e9b874fa"),e=e(),(0,t.Cn)(),e),s={class:"index-wrapper"},d={class:"search-wrapper"},o={class:"search-item"},u=r((()=>(0,t._)("div",{class:"search-item-lable"},"跟进状态",-1))),m=(0,t.Uk)("搜索"),n={class:"search-item"},c=r((()=>(0,t._)("div",{class:"search-item-lable"},"状态",-1))),p=(0,t.Uk)("搜索"),h=(0,t.Uk)("新建农资"),w={class:"type"},g={class:"name"},v={class:"count"},f=(0,t.Uk)("查看详情"),_=(0,t.Uk)("跟进"),b=(0,t.Uk)("完成订单"),F=(0,t.Uk)("关闭订单"),W={class:"dialog-content"},C={class:"left-view"},k={class:"right-view"},y={class:"title"},O={class:"title-item"},U={class:"title-item"},V=r((()=>(0,t._)("div",{class:"desc"},"确定完成此订单吗？",-1))),z={class:"dialog-footer"},D=(0,t.Uk)("取消"),L=(0,t.Uk)("确认"),x={class:"dialog-content"},M={class:"left-view"},P={class:"right-view"},S={class:"title"},T={class:"title-item"},I={class:"title-item"},N=r((()=>(0,t._)("div",{class:"desc"},"确定关闭此订单吗？",-1))),A={class:"dialog-footer"},Y=(0,t.Uk)("取消"),H=(0,t.Uk)("确认"),R={class:"dialog-body"},j=(0,t.Uk)("ID124555454"),B=(0,t.Uk)("2022.05.25 10:45:12"),K=(0,t.Uk)("13367890342"),$=(0,t.Uk)("湖南xxx农业公司"),Z=r((()=>(0,t._)("div",{class:"list"},[(0,t._)("div",{class:"item"},[(0,t._)("div",{class:"item-title"},"农资ID：123456"),(0,t._)("div",{class:"item-desc title"},[(0,t._)("div",{class:"left-view"},"硝酸复合肥"),(0,t._)("div",{class:"right-view price"},"¥150.00元")]),(0,t._)("div",{class:"item-desc"},[(0,t._)("div",{class:"left-view type"},"化肥"),(0,t._)("div",{class:"right-view count"},"20袋（共1000公斤）")]),(0,t._)("div",{class:"item-desc company"},[(0,t._)("div",{class:"left-view"},"内蒙古东升肥料有限公司"),(0,t._)("div",{class:"right-view unit"},"（50公斤/袋）")])])],-1))),J=r((()=>(0,t._)("div",{class:"summary-info"},[(0,t._)("div",{class:"left-view"},"合计"),(0,t._)("div",{class:"right-view"},[(0,t._)("div",{class:"right-view-item"},[(0,t._)("div",{class:"label"},"化肥"),(0,t._)("div",{class:"value"},"50000公斤")]),(0,t._)("div",{class:"right-view-item"},[(0,t._)("div",{class:"label"},"有机肥"),(0,t._)("div",{class:"value"},"90000公斤")]),(0,t._)("div",{class:"right-view-item"},[(0,t._)("div",{class:"label"},"参考价"),(0,t._)("div",{class:"value price"},"¥12300.00元")])])],-1))),q=r((()=>(0,t._)("div",{class:"record-div"},[(0,t._)("div",{class:"record-div-title"},"跟进记录"),(0,t._)("div",{class:"record-list"},[(0,t._)("div",{class:"record-item record-item-current"},[(0,t._)("div",{class:"record-item-status"},"订单完成/异常关闭"),(0,t._)("div",{class:"record-item-name"},"张三"),(0,t._)("div",{class:"record-item-time"},"2022.05.25 11:45:25")]),(0,t._)("div",{class:"record-item"},[(0,t._)("div",{class:"record-item-status"},"已经电话沟通，待付款"),(0,t._)("div",{class:"record-item-name"},"张三"),(0,t._)("div",{class:"record-item-time"},"2022.05.25 11:45:25")])])],-1))),E={class:"dialog-footer"},G=(0,t.Uk)("取消"),Q=(0,t.Uk)("确认"),X={class:"dialog-body"},ee={class:"dialog-footer"},le=(0,t.Uk)("取消"),ae=(0,t.Uk)("确认");function te(e,l,a,r,te,ie){const re=(0,t.up)("el-input"),se=(0,t.up)("el-option"),de=(0,t.up)("el-select"),oe=(0,t.up)("el-button"),ue=(0,t.up)("el-table-column"),me=(0,t.up)("el-table"),ne=(0,t.up)("el-pagination"),ce=(0,t.up)("el-tab-pane"),pe=(0,t.up)("MaterialsTab"),he=(0,t.up)("el-tabs"),we=(0,t.up)("WarningFilled"),ge=(0,t.up)("el-icon"),ve=(0,t.up)("el-dialog"),fe=(0,t.up)("el-descriptions-item"),_e=(0,t.up)("el-descriptions"),be=(0,t.up)("el-form-item"),Fe=(0,t.up)("el-form");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t._)("div",d,["purchaseOrder"===te.activeName?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t.Wm)(re,{modelValue:te.purchaseOrderForm.keyWords,"onUpdate:modelValue":l[0]||(l[0]=e=>te.purchaseOrderForm.keyWords=e),class:"search-input",placeholder:"订单号/提交人/归属企业/农资名称"},null,8,["modelValue"]),(0,t._)("div",o,[u,(0,t.Wm)(de,{modelValue:te.purchaseOrderForm.status,"onUpdate:modelValue":l[1]||(l[1]=e=>te.purchaseOrderForm.status=e),class:"search-select",placeholder:"请选择"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(te.orderStatusList,(e=>((0,t.wg)(),(0,t.j4)(se,{label:e.label,value:e.value,key:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,t.Wm)(oe,{type:"primary",onClick:ie.search},{default:(0,t.w5)((()=>[m])),_:1},8,["onClick"])])],64)):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t.Wm)(re,{modelValue:te.materialsForm.keyWords,"onUpdate:modelValue":l[2]||(l[2]=e=>te.materialsForm.keyWords=e),class:"search-input",placeholder:"农资ID/农资名称"},null,8,["modelValue"]),(0,t._)("div",n,[c,(0,t.Wm)(de,{modelValue:te.materialsForm.status,"onUpdate:modelValue":l[3]||(l[3]=e=>te.materialsForm.status=e),class:"search-select",placeholder:"请选择"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(te.statusList,((e,l)=>((0,t.wg)(),(0,t.j4)(se,{label:e.label,value:e.value,key:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,t.Wm)(oe,{type:"primary"},{default:(0,t.w5)((()=>[p])),_:1}),(0,t.Wm)(oe,{type:"primary",icon:"CirclePlus",onClick:ie.addMaterials},{default:(0,t.w5)((()=>[h])),_:1},8,["onClick"])])],64))]),(0,t.Wm)(he,{modelValue:te.activeName,"onUpdate:modelValue":l[6]||(l[6]=e=>te.activeName=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(ce,{label:"采购订单",name:"purchaseOrder"},{default:(0,t.w5)((()=>[(0,t.Wm)(me,{data:te.purchaseOrderList,style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(ue,{type:"index"}),(0,t.Wm)(ue,{label:"订单号",prop:"orderUuid",width:"180"}),(0,t.Wm)(ue,{label:"订单内容",width:"300"},{default:(0,t.w5)((e=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.row.agriculturalCartBos,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{class:"order-content-item",key:l},[(0,t._)("div",w,(0,i.zw)(e.agriculturalBo.agriculturalCategory),1),(0,t._)("div",g,(0,i.zw)(e.agriculturalBo.title),1),(0,t._)("div",v,(0,i.zw)(e.agriculturalCount)+(0,i.zw)(e.agriculturalBo.unitweight),1)])))),128))])),_:1}),(0,t.Wm)(ue,{label:"提交时间",width:"180"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,i.zw)(e.row.orderTime),1)])),_:1}),(0,t.Wm)(ue,{label:"提交人",prop:"userName",width:"180"}),(0,t.Wm)(ue,{label:"归属企业",prop:"userCompany",width:"180"}),(0,t.Wm)(ue,{label:"更进状态",prop:"orderStatusText",width:"180"}),(0,t.Wm)(ue,{label:"最新更进",prop:"followText",width:"180"}),(0,t.Wm)(ue,{label:"操作",width:"300"},{default:(0,t.w5)((e=>[(0,t.Wm)(oe,{type:"text",size:"small",onClick:l=>ie.openOrderDetailDialog(e.row)},{default:(0,t.w5)((()=>[f])),_:2},1032,["onClick"]),(0,t.Wm)(oe,{type:"text",size:"small",onClick:l=>ie.openFollowDialog(e.row)},{default:(0,t.w5)((()=>[_])),_:2},1032,["onClick"]),(0,t.Wm)(oe,{type:"text",size:"small",onClick:l=>ie.openFinishOrderDialog(e.row)},{default:(0,t.w5)((()=>[b])),_:2},1032,["onClick"]),(0,t.Wm)(oe,{type:"text",size:"small",onClick:l=>ie.openCloseOrderDialog(e.row)},{default:(0,t.w5)((()=>[F])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,t.Wm)(ne,{class:"pagination",currentPage:te.purchaseOrderForm.currentPage,"onUpdate:currentPage":l[4]||(l[4]=e=>te.purchaseOrderForm.currentPage=e),"page-size":te.purchaseOrderForm.pageSize,"onUpdate:page-size":l[5]||(l[5]=e=>te.purchaseOrderForm.pageSize=e),"page-sizes":[10,20,30,40],background:"",layout:"total, prev, pager, next, sizes, jumper",total:te.purchaseOrderForm.total,onSizeChange:ie.handleSizeChange,onCurrentChange:ie.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])])),_:1}),(0,t.Wm)(ce,{label:"农资库",name:"agricultureMaterials"},{default:(0,t.w5)((()=>[(0,t.Wm)(pe,{ref:"materialsTab"},null,512)])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(ve,{modelValue:te.visibleForFinishOrder,"onUpdate:modelValue":l[8]||(l[8]=e=>te.visibleForFinishOrder=e),title:"完成订单",width:"50%"},{footer:(0,t.w5)((()=>[(0,t._)("span",z,[(0,t.Wm)(oe,{onClick:ie.closeFinishOrderDialog},{default:(0,t.w5)((()=>[D])),_:1},8,["onClick"]),(0,t.Wm)(oe,{type:"primary",onClick:l[7]||(l[7]=e=>ie.updateOrderStatus(1))},{default:(0,t.w5)((()=>[L])),_:1})])])),default:(0,t.w5)((()=>[(0,t._)("div",W,[(0,t._)("div",C,[(0,t.Wm)(ge,null,{default:(0,t.w5)((()=>[(0,t.Wm)(we)])),_:1})]),(0,t._)("div",k,[(0,t._)("div",y,[(0,t._)("span",O,"提交人："+(0,i.zw)(te.selectedOrder&&te.selectedOrder.userName),1),(0,t._)("span",U,"归属企业："+(0,i.zw)(te.selectedOrder&&te.selectedOrder.userCompany),1)]),V])])])),_:1},8,["modelValue"]),(0,t.Wm)(ve,{modelValue:te.visibleForCloseOrder,"onUpdate:modelValue":l[10]||(l[10]=e=>te.visibleForCloseOrder=e),title:"关闭订单",width:"50%"},{footer:(0,t.w5)((()=>[(0,t._)("span",A,[(0,t.Wm)(oe,{onClick:ie.closeCloseOrderDialog},{default:(0,t.w5)((()=>[Y])),_:1},8,["onClick"]),(0,t.Wm)(oe,{type:"primary",onClick:l[9]||(l[9]=e=>ie.updateOrderStatus(2))},{default:(0,t.w5)((()=>[H])),_:1})])])),default:(0,t.w5)((()=>[(0,t._)("div",x,[(0,t._)("div",M,[(0,t.Wm)(ge,null,{default:(0,t.w5)((()=>[(0,t.Wm)(we)])),_:1})]),(0,t._)("div",P,[(0,t._)("div",S,[(0,t._)("span",T,"提交人："+(0,i.zw)(te.selectedOrder&&te.selectedOrder.userName),1),(0,t._)("span",I,"归属企业："+(0,i.zw)(te.selectedOrder&&te.selectedOrder.userCompany),1)]),N])])])),_:1},8,["modelValue"]),(0,t.Wm)(ve,{modelValue:te.visibleForOrderDetail,"onUpdate:modelValue":l[12]||(l[12]=e=>te.visibleForOrderDetail=e),title:"订单详情",width:"50%"},{footer:(0,t.w5)((()=>[(0,t._)("span",E,[(0,t.Wm)(oe,{onClick:l[11]||(l[11]=e=>te.visibleForOrderDetail=!1)},{default:(0,t.w5)((()=>[G])),_:1}),(0,t.Wm)(oe,{type:"primary"},{default:(0,t.w5)((()=>[Q])),_:1})])])),default:(0,t.w5)((()=>[(0,t._)("div",R,[(0,t.Wm)(_e,{column:2},{default:(0,t.w5)((()=>[(0,t.Wm)(fe,{label:"订单号:"},{default:(0,t.w5)((()=>[j])),_:1}),(0,t.Wm)(fe,{label:"提交时间:"},{default:(0,t.w5)((()=>[B])),_:1}),(0,t.Wm)(fe,{label:"提交人:"},{default:(0,t.w5)((()=>[K])),_:1}),(0,t.Wm)(fe,{label:"归属企业："},{default:(0,t.w5)((()=>[$])),_:1})])),_:1}),Z,J,q])])),_:1},8,["modelValue"]),(0,t.Wm)(ve,{modelValue:te.visibleForFollow,"onUpdate:modelValue":l[14]||(l[14]=e=>te.visibleForFollow=e),title:"订单跟进",width:"50%"},{footer:(0,t.w5)((()=>[(0,t._)("span",ee,[(0,t.Wm)(oe,{onClick:ie.closeFollowDialog},{default:(0,t.w5)((()=>[le])),_:1},8,["onClick"]),(0,t.Wm)(oe,{type:"primary",onClick:ie.saveFollowText},{default:(0,t.w5)((()=>[ae])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t._)("div",X,[(0,t.Wm)(Fe,{"label-width":"100px","label-suffix":":",model:te.followForm},{default:(0,t.w5)((()=>[(0,t.Wm)(be,{label:"订单号"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(te.selectedOrder&&te.selectedOrder.orderUuid),1)])),_:1}),(0,t.Wm)(be,{label:"提交人"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(te.selectedOrder&&te.selectedOrder.userName),1)])),_:1}),(0,t.Wm)(be,{label:"归属企业"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(te.selectedOrder&&te.selectedOrder.userCompany),1)])),_:1}),(0,t.Wm)(be,{label:"跟进记录"},{default:(0,t.w5)((()=>[(0,t.Wm)(re,{modelValue:te.followForm.followText,"onUpdate:modelValue":l[13]||(l[13]=e=>te.followForm.followText=e),autosize:{minRows:3,maxRows:5},type:"textarea",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue"])])}var ie=a(7484),re=a.n(ie);const se={class:"materials-tab-wrapper"},de=(0,t.Uk)("查看详情"),oe=(0,t.Uk)("上架"),ue=(0,t.Uk)("下架"),me=(0,t.Uk)("编辑"),ne={class:"dialog-body"},ce=(0,t.Uk)("元 "),pe={class:"form-content"},he=(0,t._)("span",{class:"line"},"/",-1),we=(0,t.Uk)(" 添加样图 "),ge=(0,t._)("div",{class:"tips"},"*仅支持jpg和png格式图片上传",-1),ve={class:"dialog-footer"},fe=(0,t.Uk)("取消"),_e=(0,t.Uk)("确认"),be={class:"dialog-content"},Fe={class:"left-view"},We=(0,t._)("div",{class:"right-view"},[(0,t._)("div",{class:"title"},[(0,t._)("span",{class:"title-item"},"提交人：13667316666"),(0,t._)("span",{class:"title-item"},"归属企业：湖南xxx农业公司")]),(0,t._)("div",{class:"desc"},"确定取消新建农资吗？")],-1),Ce={class:"dialog-footer"},ke=(0,t.Uk)("取消"),ye=(0,t.Uk)("确认"),Oe={class:"dialog-body"},Ue=(0,t.Uk)(" 硝酸复合肥 "),Ve=(0,t.Uk)(" 化肥 "),ze=(0,t.Uk)(" 150.00元 "),De=(0,t.Uk)(" 50公斤/袋 "),Le=(0,t.Uk)(" 内蒙古xxx肥料有限公司 "),xe={class:"dialog-footer"},Me=(0,t.Uk)("取消"),Pe=(0,t.Uk)("确认"),Se={class:"dialog-body"},Te={class:"dialog-footer"},Ie=(0,t.Uk)("取消"),Ne=(0,t.Uk)("确认");function Ae(e,l,a,r,s,d){const o=(0,t.up)("el-table-column"),u=(0,t.up)("el-button"),m=(0,t.up)("el-table"),n=(0,t.up)("el-pagination"),c=(0,t.up)("el-input"),p=(0,t.up)("el-form-item"),h=(0,t.up)("el-option"),w=(0,t.up)("el-select"),g=(0,t.up)("el-input-number"),v=(0,t.up)("Camera"),f=(0,t.up)("el-icon"),_=(0,t.up)("el-upload"),b=(0,t.up)("el-form"),F=(0,t.up)("el-dialog"),W=(0,t.up)("WarningFilled");return(0,t.wg)(),(0,t.iD)("div",se,[(0,t.Wm)(m,{data:s.materialsList,style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{type:"index"}),(0,t.Wm)(o,{label:"农资ID",prop:"agriculturalNo",width:"120"}),(0,t.Wm)(o,{label:"农资名称",prop:"title",width:"150"}),(0,t.Wm)(o,{label:"农资类型",width:"120"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,i.zw)(e.row.agriculturalCategory),1)])),_:1}),(0,t.Wm)(o,{label:"参考价值（元）",prop:"agriculturalPrice",width:"150"}),(0,t.Wm)(o,{label:"规格",width:"180"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,i.zw)(e.row.agriculturalCount)+(0,i.zw)(e.row.unitweight)+"/"+(0,i.zw)(e.row.unitmeasurement),1)])),_:1}),(0,t.Wm)(o,{label:"状态",prop:"",width:"180"}),(0,t.Wm)(o,{label:"厂家",prop:"manufacturers",width:"180"}),(0,t.Wm)(o,{label:"操作",width:"300"},{default:(0,t.w5)((e=>[(0,t.Wm)(u,{type:"text",size:"small",onClick:l=>d.viewDetail(e.row)},{default:(0,t.w5)((()=>[de])),_:2},1032,["onClick"]),(0,t.Wm)(u,{type:"text",size:"small",onClick:l=>d.operateMaterials(e.row)},{default:(0,t.w5)((()=>[oe])),_:2},1032,["onClick"]),(0,t.Wm)(u,{type:"text",size:"small",onClick:l=>d.operateMaterials(e.row)},{default:(0,t.w5)((()=>[ue])),_:2},1032,["onClick"]),(0,t.Wm)(u,{type:"text",size:"small",onClick:l=>d.editMaterials(e.row)},{default:(0,t.w5)((()=>[me])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,t.Wm)(n,{class:"pagination",currentPage:s.materialsForm.currentPage,"onUpdate:currentPage":l[0]||(l[0]=e=>s.materialsForm.currentPage=e),"page-size":s.materialsForm.pageSize,"onUpdate:page-size":l[1]||(l[1]=e=>s.materialsForm.pageSize=e),"page-sizes":[10,20,30,40],background:"",layout:"total, prev, pager, next, sizes, jumper",total:s.materialsForm.total,onSizeChange:d.handleSizeChange,onCurrentChange:d.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"]),(0,t.Wm)(F,{modelValue:s.visibleForAdd,"onUpdate:modelValue":l[11]||(l[11]=e=>s.visibleForAdd=e),title:"新建农资",width:"50%"},{footer:(0,t.w5)((()=>[(0,t._)("span",ve,[(0,t.Wm)(u,{onClick:d.cancelAdd},{default:(0,t.w5)((()=>[fe])),_:1},8,["onClick"]),(0,t.Wm)(u,{type:"primary",onClick:d.confirmAdd},{default:(0,t.w5)((()=>[_e])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t._)("div",ne,[(0,t.Wm)(b,{model:s.addForm,"label-width":"120px","label-suffix":":"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{label:"农资名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:s.addForm.title,"onUpdate:modelValue":l[2]||(l[2]=e=>s.addForm.title=e),clearable:"",placeholder:"请输入农资名称"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(p,{label:"农资类型"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{modelValue:s.addForm.agriculturalCategoryId,"onUpdate:modelValue":l[3]||(l[3]=e=>s.addForm.agriculturalCategoryId=e),class:"form-select",placeholder:"选择农资类型"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.materialsTypeList,(e=>((0,t.wg)(),(0,t.j4)(h,{label:e.title,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(p,{label:"参考单价"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:s.addForm.agriculturalPrice,"onUpdate:modelValue":l[4]||(l[4]=e=>s.addForm.agriculturalPrice=e),class:"form-input-number",min:0,precision:2,controls:!1},null,8,["modelValue"]),ce])),_:1}),(0,t.Wm)(p,{label:"规格"},{default:(0,t.w5)((()=>[(0,t._)("div",pe,[(0,t.Wm)(g,{modelValue:s.addForm.agriculturalCount,"onUpdate:modelValue":l[5]||(l[5]=e=>s.addForm.agriculturalCount=e),min:0,precision:2,controls:!1},null,8,["modelValue"]),(0,t.Wm)(w,{modelValue:s.addForm.unitweightid,"onUpdate:modelValue":l[6]||(l[6]=e=>s.addForm.unitweightid=e),placeholder:"请选择"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.unitTypeList,(e=>((0,t.wg)(),(0,t.j4)(h,{label:e.title,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),he,(0,t.Wm)(w,{modelValue:s.addForm.unitmeasurementid,"onUpdate:modelValue":l[7]||(l[7]=e=>s.addForm.unitmeasurementid=e),placeholder:"请选择"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.unitmeasurementList,(e=>((0,t.wg)(),(0,t.j4)(h,{label:e.title,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])])),_:1}),(0,t.Wm)(p,{label:"厂家"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:s.addForm.manufacturers,"onUpdate:modelValue":l[8]||(l[8]=e=>s.addForm.manufacturers=e),placeholder:"请输入厂家"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(p,{label:"农资banner图"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{"file-list":s.addForm.bannerList,"onUpdate:file-list":l[9]||(l[9]=e=>s.addForm.bannerList=e),action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15","list-type":"picture-card","on-preview":d.handlePictureCardPreview,"on-remove":d.handleRemove},{tip:(0,t.w5)((()=>[ge])),default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v)])),_:1}),we])),_:1},8,["file-list","on-preview","on-remove"])])),_:1}),(0,t.Wm)(p,{label:"农资图文介绍"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:s.addForm.richContent,"onUpdate:modelValue":l[10]||(l[10]=e=>s.addForm.richContent=e),autosize:{minRows:3,maxRows:5},type:"textarea",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue"]),(0,t.Wm)(F,{modelValue:s.visibleForCancel,"onUpdate:modelValue":l[13]||(l[13]=e=>s.visibleForCancel=e),title:"提示",width:"40%"},{footer:(0,t.w5)((()=>[(0,t._)("span",Ce,[(0,t.Wm)(u,{onClick:l[12]||(l[12]=e=>s.visibleForCancel=!1)},{default:(0,t.w5)((()=>[ke])),_:1}),(0,t.Wm)(u,{type:"primary",onClick:d.confirm},{default:(0,t.w5)((()=>[ye])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t._)("div",be,[(0,t._)("div",Fe,[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W)])),_:1})]),We])])),_:1},8,["modelValue"]),(0,t.Wm)(F,{modelValue:s.visibleForDetail,"onUpdate:modelValue":l[16]||(l[16]=e=>s.visibleForDetail=e),title:"农资详情",width:"50%"},{footer:(0,t.w5)((()=>[(0,t._)("span",xe,[(0,t.Wm)(u,{onClick:l[15]||(l[15]=e=>s.visibleForDetail=!1)},{default:(0,t.w5)((()=>[Me])),_:1}),(0,t.Wm)(u,{type:"primary"},{default:(0,t.w5)((()=>[Pe])),_:1})])])),default:(0,t.w5)((()=>[(0,t._)("div",Oe,[(0,t.Wm)(b,{model:s.addForm,"label-width":"120px","label-suffix":":"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{label:"农资名称"},{default:(0,t.w5)((()=>[Ue])),_:1}),(0,t.Wm)(p,{label:"农资类型"},{default:(0,t.w5)((()=>[Ve])),_:1}),(0,t.Wm)(p,{label:"参考单价"},{default:(0,t.w5)((()=>[ze])),_:1}),(0,t.Wm)(p,{label:"规格"},{default:(0,t.w5)((()=>[De])),_:1}),(0,t.Wm)(p,{label:"厂家"},{default:(0,t.w5)((()=>[Le])),_:1}),(0,t.Wm)(p,{label:"农资banner图"}),(0,t.Wm)(p,{label:"农资图文介绍"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:s.addForm.richContent,"onUpdate:modelValue":l[14]||(l[14]=e=>s.addForm.richContent=e),autosize:{minRows:3,maxRows:5},type:"textarea",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue"]),(0,t.Wm)(F,{modelValue:s.visibleForOperate,"onUpdate:modelValue":l[18]||(l[18]=e=>s.visibleForOperate=e),title:"农资上/下架",width:"40%"},{footer:(0,t.w5)((()=>[(0,t._)("span",Te,[(0,t.Wm)(u,{onClick:l[17]||(l[17]=e=>s.visibleForOperate=!1)},{default:(0,t.w5)((()=>[Ie])),_:1}),(0,t.Wm)(u,{type:"primary"},{default:(0,t.w5)((()=>[Ne])),_:1})])])),default:(0,t.w5)((()=>[(0,t._)("div",Se,[(0,t.Wm)(b,{"label-width":"120px","label-suffix":":"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{label:"农资ID"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(s.selectedMaterials&&s.selectedMaterials.agriculturalNo),1)])),_:1}),(0,t.Wm)(p,{label:"农资名称"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(s.selectedMaterials&&s.selectedMaterials.title),1)])),_:1}),(0,t.Wm)(p,{label:"参考单价"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(s.selectedMaterials&&s.selectedMaterials.agriculturalPrice)+"元 ",1)])),_:1}),(0,t.Wm)(p,{label:"规格"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(s.selectedMaterials&&s.selectedMaterials.agriculturalCount)+(0,i.zw)(s.selectedMaterials&&s.selectedMaterials.unitweight)+"/"+(0,i.zw)(s.selectedMaterials&&s.selectedMaterials.unitmeasurement),1)])),_:1})])),_:1})])])),_:1},8,["modelValue"])])}var Ye=a(512),He={name:"MaterialsTab",data(){return{materialsTypeList:[],unitTypeList:[],unitmeasurementList:[],materialsList:[],statusList:[{label:"全部",value:-1},{label:"上架",value:0},{label:"下架",value:1}],materialsForm:{keyWords:"",status:-1,currentPage:1,pageSize:10,total:0},visibleForAdd:!1,addForm:{title:"",agriculturalCategoryId:"",agriculturalPrice:void 0,agriculturalCount:void 0,unitweightid:"",unitmeasurementid:"",manufacturers:"",bannerList:"",richContent:""},visibleForCancel:!1,visibleForDetail:!1,visibleForOperate:!1,selectedMaterials:null}},mounted(){this.getMaterialTypeList(),this.getUnitTypeList(),this.getUnitmeasurementList(),this.getMaterialsList()},methods:{getMaterialTypeList(){const e={};return(0,Ye.gF)(e).then((e=>{e&&e.data&&(this.materialsTypeList=e.data)}))},getUnitTypeList(){const e={};return(0,Ye.tn)(e).then((e=>{e&&e.data&&(this.unitTypeList=e.data)}))},getUnitmeasurementList(){const e={};(0,Ye.t6)(e).then((e=>{e&&e.data&&(this.unitmeasurementList=e.data)}))},getMaterialsList(){const e={pageNum:this.materialsForm.currentPage,pageSize:this.materialsForm.pageSize,param:{id:0,keyWord:this.materialsForm.keyWords,status:this.materialsForm.status}};return(0,Ye.lR)(e).then((e=>{this.materialsForm.total=e.total||0,e&&e.data?this.materialsList=e.data.map((e=>e)):this.materialsList=[]}))},saveMaterials(){const e={agriculturalBo:{agriculturalCategory:"",agriculturalCategoryId:this.addForm.agriculturalCategoryId,agriculturalCount:this.addForm.agriculturalCount,agriculturalNo:"",agriculturalPrice:this.addForm.agriculturalPrice,definition:0,id:0,manufacturers:this.addForm.manufacturers,title:this.addForm.title,unitmeasurement:"",unitmeasurementid:this.addForm.unitmeasurementid,unitweight:"",unitweightid:this.addForm.unitweightid,weight:0},bannerList:this.addForm.bannerList,richContent:this.addForm.richContent},l=this.materialsTypeList.find((e=>e.id===this.addForm.agriculturalCategoryId)),a=this.unitTypeList.find((e=>e.id===this.addForm.unitweightid)),t=this.unitmeasurementList.find((e=>e.id===this.addForm.unitmeasurementid));return this.addForm.agriculturalCategory=l&&l.title,this.addForm.unitmeasurement=t&&t.title,this.addForm.unitweight=a&&a.title,(0,Ye.BD)(e).then((e=>{e&&"200"===e.code?(this.$message.success("操作成功"),this.getMaterialsList()):this.$message.error(e.message||"操作失败")}))},updateMaterialsStatus(){},handleSizeChange(){this.materialsForm.currentPage=1,this.getMaterialsList()},handleCurrentChange(){this.getMaterialsList()},handlePictureCardPreview(){},handleRemove(){},cancelAdd(){this.visibleForCancel=!0},confirmAdd(){this.saveMaterials(),this.visibleForCancel=!1,this.visibleForAdd=!1,this.addForm={title:"",agriculturalCategoryId:"",agriculturalPrice:void 0,agriculturalCount:void 0,unitweightid:"",unitmeasurementid:"",manufacturers:"",bannerList:"",richContent:""}},confirm(){this.visibleForCancel=!1,this.visibleForAdd=!1,this.addForm={title:"",agriculturalCategoryId:"",agriculturalPrice:void 0,agriculturalCount:void 0,unitweightid:"",unitmeasurementid:"",manufacturers:"",bannerList:"",richContent:""}},addMaterials(){this.visibleForAdd=!0},editMaterials(e){this.selectedMaterials=e,this.visibleForAdd=!0},operateMaterials(e){this.selectedMaterials=e,this.visibleForOperate=!0},viewDetail(e){this.selectedMaterials=e,this.visibleForDetail=!0}}},Re=a(3744);const je=(0,Re.Z)(He,[["render",Ae]]);var Be=je,Ke={name:"IndexPage",components:{MaterialsTab:Be},data(){return{activeName:"purchaseOrder",purchaseOrderList:[],orderStatusList:[{label:"全部",value:-1},{label:"未跟进",value:0},{label:"已完成",value:1},{label:"已关闭",value:2},{label:"已跟进",value:3}],statusList:[{label:"全部",value:-1},{label:"上架",value:0},{label:"下架",value:1}],purchaseOrderForm:{keyWords:"",status:-1,currentPage:1,pageSize:10,total:0},selectedOrder:null,visibleForFinishOrder:!1,visibleForCloseOrder:!1,visibleForOrderDetail:!1,visibleForFollow:!1,followForm:{followText:""},materialsForm:{keyWords:"",status:""}}},mounted(){this.getPurchaseOrderList()},methods:{getPurchaseOrderList(){const e={pageNum:this.purchaseOrderForm.currentPage,pageSize:this.purchaseOrderForm.pageSize,param:{id:0,keyWord:this.purchaseOrderForm.keyWords,orderState:this.purchaseOrderForm.status}};return(0,Ye.aK)(e).then((e=>{this.purchaseOrderForm.total=e.total||0,e&&e.data?this.purchaseOrderList=e.data.map((e=>{const l=this.orderStatusList.find((l=>l.value===e.orderStatus));return e.orderStatusText=l&&l.label||"",e})):this.purchaseOrderList=[]}))},handleSizeChange(){this.purchaseOrderForm.currentPage=1,this.getPurchaseOrderList()},handleCurrentChange(){this.getPurchaseOrderList()},search(){this.purchaseOrderForm.currentPage=1,this.getPurchaseOrderList()},updateOrderStatus(e){const l={id:this.selectedOrder.id,orderStatus:e};return(0,Ye.hJ)(l).then((l=>{l&&"200"===l.code?(this.$message.success("操作成功"),1===e?this.closeFinishOrderDialog():2===e&&this.closeCloseOrderDialog(),this.getPurchaseOrderList()):this.$message.error(l.message||"操作失败")}))},openFinishOrderDialog(e){this.selectedOrder=e,this.visibleForFinishOrder=!0},closeFinishOrderDialog(){this.visibleForFinishOrder=!1,this.selectedOrder=null},openCloseOrderDialog(e){this.selectedOrder=e,this.visibleForCloseOrder=!0},closeCloseOrderDialog(){this.visibleForCloseOrder=!1,this.selectedOrder=null},openOrderDetailDialog(e){this.selectedOrder=e,this.visibleForOrderDetail=!0},closeOrderDetailDialog(){this.visibleForOrderDetail=!1,this.selectedOrder=null},openFollowDialog(e){this.selectedOrder=e,this.visibleForFollow=!0},closeFollowDialog(){this.visibleForFollow=!1,this.selectedOrder=null},saveFollowText(){const e={createTime:re()().format("YYYY-MM-DD HH:mm:ss"),followText:this.followForm.followText,id:0,orderNo:this.selectedOrder&&this.selectedOrder.orderUuid};return(0,Ye.BD)(e).then((e=>{e&&"200"===e.code?(this.$message.success("操作成功"),this.closeFollowDialog(),this.getPurchaseOrderList()):this.$message.error(e.message||"操作失败")}))},addMaterials(){this.$refs.materialsTab.visibleForAdd=!0}}};const $e=(0,Re.Z)(Ke,[["render",te],["__scopeId","data-v-e9b874fa"]]);var Ze=$e}}]);
//# sourceMappingURL=405.b66e5e9d.js.map