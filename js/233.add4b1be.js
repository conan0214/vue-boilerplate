"use strict";(self["webpackChunkerp"]=self["webpackChunkerp"]||[]).push([[233],{9233:function(e,t,l){l.r(t),l.d(t,{default:function(){return V}});var a=l(6252),o=l(3577);const d=e=>((0,a.dD)("data-v-16879b68"),e=e(),(0,a.Cn)(),e),s={class:"index-wrapper"},i={class:"search-wrapper"},n={class:"search-item"},r=d((()=>(0,a._)("div",{class:"search-item-lable"},"模型状态",-1))),p=(0,a.Uk)("搜索"),u=(0,a.Uk)("创建模型"),c=(0,a.Uk)("查看详情"),m=(0,a.Uk)("停用"),h=(0,a.Uk)("启用"),g=(0,a.Uk)("编辑"),M={class:"dialog-content"},w={class:"left-view"},k={class:"right-view"},P={class:"title"},v={class:"title-item"},y={class:"title-item"},b={class:"title-item"},S={class:"desc"},C={class:"dialog-footer"},_=(0,a.Uk)("取消"),W=(0,a.Uk)("确认");function f(e,t,l,d,f,z){const F=(0,a.up)("el-input"),U=(0,a.up)("el-option"),T=(0,a.up)("el-select"),A=(0,a.up)("el-button"),L=(0,a.up)("el-table-column"),V=(0,a.up)("el-table"),D=(0,a.up)("el-pagination"),N=(0,a.up)("el-tab-pane"),x=(0,a.up)("el-tabs"),Y=(0,a.up)("WarningFilled"),$=(0,a.up)("el-icon"),j=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",i,[(0,a.Wm)(F,{modelValue:f.plantModelForm.keyWords,"onUpdate:modelValue":t[0]||(t[0]=e=>f.plantModelForm.keyWords=e),class:"search-input",placeholder:"请输入作物种类/作物品种"},null,8,["modelValue"]),(0,a._)("div",n,[r,(0,a.Wm)(T,{modelValue:f.plantModelForm.status,"onUpdate:modelValue":t[1]||(t[1]=e=>f.plantModelForm.status=e),class:"search-select",placeholder:"请选择"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.statusList,(e=>((0,a.wg)(),(0,a.j4)(U,{label:e.label,value:e.value,key:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,a.Wm)(A,{type:"primary",onClick:z.search},{default:(0,a.w5)((()=>[p])),_:1},8,["onClick"]),(0,a.Wm)(A,{type:"primary",icon:"CirclePlus",onClick:z.addPlantModel},{default:(0,a.w5)((()=>[u])),_:1},8,["onClick"])])]),(0,a.Wm)(x,{modelValue:f.activeName,"onUpdate:modelValue":t[4]||(t[4]=e=>f.activeName=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{label:"植物模型列表",name:"plantModelTab"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{data:f.plantModelList,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{type:"index"}),(0,a.Wm)(L,{label:"植物种类",prop:"categoryTitle",width:"120"}),(0,a.Wm)(L,{label:"植物品种",prop:"varietyTitle",width:"150"}),(0,a.Wm)(L,{label:"栽培方式",width:"120"},{default:(0,a.w5)((e=>[(0,a.Uk)((0,o.zw)(e.row.growthName),1)])),_:1}),(0,a.Wm)(L,{label:"模型状态",prop:"stateText",width:"120"}),(0,a.Wm)(L,{label:"创建人",prop:"createName",width:"180"}),(0,a.Wm)(L,{label:"操作时间",prop:"updateTime",width:"180"}),(0,a.Wm)(L,{label:"操作",width:"300"},{default:(0,a.w5)((e=>[(0,a.Wm)(A,{link:"",type:"primary",size:"small"},{default:(0,a.w5)((()=>[c])),_:1}),0===e.row.state?((0,a.wg)(),(0,a.j4)(A,{key:0,link:"",type:"primary",size:"small",onClick:t=>z.openStopAndStartDialog(e.row)},{default:(0,a.w5)((()=>[m])),_:2},1032,["onClick"])):(0,a.kq)("",!0),1===e.row.state?((0,a.wg)(),(0,a.j4)(A,{key:1,link:"",type:"primary",size:"small",onClick:t=>z.openStopAndStartDialog(e.row)},{default:(0,a.w5)((()=>[h])),_:2},1032,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(A,{link:"",type:"primary",size:"small",onClick:t=>z.editPlantModel(e.row)},{default:(0,a.w5)((()=>[g])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,a.Wm)(D,{class:"pagination",currentPage:f.plantModelForm.currentPage,"onUpdate:currentPage":t[2]||(t[2]=e=>f.plantModelForm.currentPage=e),"page-size":f.plantModelForm.pageSize,"onUpdate:page-size":t[3]||(t[3]=e=>f.plantModelForm.pageSize=e),"page-sizes":[10,20,30,40],background:"",layout:"total, prev, pager, next, sizes, jumper",total:f.plantModelForm.total,onSizeChange:z.handleSizeChange,onCurrentChange:z.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(j,{modelValue:f.visibleForStopAndStart,"onUpdate:modelValue":t[5]||(t[5]=e=>f.visibleForStopAndStart=e),title:f.selectedPlantModel&&0===f.selectedPlantModel.state?"停用":"启用",width:"40%"},{footer:(0,a.w5)((()=>[(0,a._)("span",C,[(0,a.Wm)(A,{onClick:z.closeStopAndStartDialog},{default:(0,a.w5)((()=>[_])),_:1},8,["onClick"]),(0,a.Wm)(A,{type:"primary",onClick:z.stopAndStartPlantModel},{default:(0,a.w5)((()=>[W])),_:1},8,["onClick"])])])),default:(0,a.w5)((()=>[(0,a._)("div",M,[(0,a._)("div",w,[(0,a.Wm)($,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Y)])),_:1})]),(0,a._)("div",k,[(0,a._)("div",P,[(0,a._)("span",v,"植物种类："+(0,o.zw)(f.selectedPlantModel&&f.selectedPlantModel.categoryTitle),1),(0,a._)("span",y,"植物品种："+(0,o.zw)(f.selectedPlantModel&&f.selectedPlantModel.varietyTitle),1),(0,a._)("span",b,"栽培方式："+(0,o.zw)(f.selectedPlantModel&&f.selectedPlantModel.growthName),1)]),(0,a._)("div",S," 确定"+(0,o.zw)(f.selectedPlantModel&&0===f.selectedPlantModel.state?"停用":"启用")+"此任务吗？ ",1)])])])),_:1},8,["modelValue","title"])])}var z=l(7484),F=l.n(z),U=l(512),T={name:"PlantModel",data(){return{activeName:"plantModelTab",loading:!1,statusList:[{label:"全部",value:-1},{label:"正常",value:0},{label:"停用",value:1}],plantModelList:[],plantModelForm:{keyWords:"",status:-1,currentPage:1,pageSize:10,total:0},visibleForStopAndStart:!1,selectedPlantModel:null}},mounted(){this.getPlantModelList()},methods:{getPlantModelList(){const e={pageNum:this.plantModelForm.currentPage,pageSize:this.plantModelForm.pageSize,param:{id:0,keyWord:this.plantModelForm.keyWords,state:this.plantModelForm.status}};return this.loading=!0,(0,U.GZ)(e).then((e=>{this.loading=!1,this.plantModelForm.total=e.total||0,e&&e.data?this.plantModelList=e.data.map((e=>{const t=this.statusList.find((t=>t.value===e.state));return e.stateText=t&&t.label,e})):this.plantModelList=[]}))},stopAndStartPlantModel(){const e={categoryTitle:this.selectedPlantModel.categoryTitle,createName:this.selectedPlantModel.createName,growthId:this.selectedPlantModel.growthId,growthName:this.selectedPlantModel.growthName,id:this.selectedPlantModel.id,state:0===this.selectedPlantModel.state?1:0,updateTime:F()().format("YYYY-MM-DD HH:mm:ss"),varietyTitle:this.selectedPlantModel.varietyTitle};return(0,U.$w)(e).then((e=>{e&&"200"===e.code?(this.$message.success("操作成功"),this.closeStopAndStartDialog(),this.getPlantModelList()):this.$message.error(e.message||"操作失败")}))},handleSizeChange(){this.plantModelForm.currentPage=1,this.getPlantModelList()},handleCurrentChange(){this.getPlantModelList()},openStopAndStartDialog(e){this.selectedPlantModel=e,this.visibleForStopAndStart=!0},closeStopAndStartDialog(){this.visibleForStopAndStart=!1,this.selectedPlantModel=null},addPlantModel(){this.$router.push("/add")},search(){this.getPlantModelList()},editPlantModel(e){this.$router.push({path:"/add",query:{id:e.id}})}}},A=l(3744);const L=(0,A.Z)(T,[["render",f],["__scopeId","data-v-16879b68"]]);var V=L}}]);
//# sourceMappingURL=233.add4b1be.js.map