"use strict";(self["webpackChunkerp"]=self["webpackChunkerp"]||[]).push([[824],{3824:function(e,l,t){t.r(l),t.d(l,{default:function(){return Ee}});var i=t(6252),a=t(3577);const s={class:"add-plant-model-wrapper"},o=(0,i._)("span",{class:"btn-back"},"返回",-1),d=(0,i._)("span",{class:"title"},"创建植物模型",-1),r={class:"content"},u={class:"section"},n={class:"section-title"},m=(0,i._)("div",{class:"left-view"},[(0,i.Uk)(" 植物生长模型 "),(0,i._)("span",{class:"tips"},"模型支持左右移动")],-1),c={class:"right-view"},g=(0,i.Uk)("添加"),h={class:"card-list"},p=["onClick"],w={class:"card-header"},v={class:"card-header-title"},f={class:"left-view"},_={class:"right-view"},G={class:"card-header-img"},b={class:"card-table"},F=(0,i._)("div",{class:"card-table-row"},[(0,i._)("div",{class:"left-view"},"参数名"),(0,i._)("div",{class:"right-view"},"参数值")],-1),k={class:"left-view"},W={class:"right-view"},L={class:"section"},C={class:"section-title"},V=(0,i._)("div",{class:"left-view"},[(0,i.Uk)(" 种植参考建议 "),(0,i._)("span",{class:"tips"},"模型支持上下移动")],-1),y={class:"right-view"},D=(0,i.Uk)("添加"),U={class:"btn"},S={class:"section"},x={class:"section-title"},M=(0,i._)("div",{class:"left-view"},"农事操作指导",-1),I={class:"right-view"},P=(0,i.Uk)("添加"),N={class:"guide-list"},T=(0,i._)("div",{class:"btn-play"},null,-1),B={class:"btns"},$={class:"title"},z={class:"desc-div"},A={class:"section"},K={class:"section-title"},Y=(0,i._)("div",{class:"left-view"},"病虫害防治",-1),j={class:"right-view"},H=(0,i.Uk)("添加"),R={class:"guide-list"},q={class:"guide-item-img"},E=(0,i._)("div",{class:"btn-play"},null,-1),O={class:"btns"},Q={class:"title"},X={class:"desc-div"},Z={class:"footer"},J=(0,i.Uk)("取消"),ee=(0,i.Uk)("保存"),le={class:"dialog-body"},te=(0,i.Uk)(" 添加参考图 "),ie={class:"standard-list"},ae={class:"standard-item-content"},se=(0,i._)("div",{class:"label"},"参数名：",-1),oe={class:"standard-item-content"},de=(0,i._)("div",{class:"label"},"参考值：",-1),re=(0,i._)("span",{class:"line"},"-",-1),ue={class:"standard-item-content"},ne={class:"dialog-footer"},me=(0,i.Uk)("取消"),ce=(0,i.Uk)("保存"),ge={class:"dialog-content"},he={class:"left-view"},pe=(0,i._)("div",{class:"right-view"},[(0,i._)("div",{class:"title"},[(0,i._)("span",{class:"title-item"},"阶段一：播种到萌芽")]),(0,i._)("div",{class:"desc"},"确定删除此生长阶段吗？")],-1),we={class:"dialog-footer"},ve=(0,i.Uk)("取消"),fe=(0,i.Uk)("确认"),_e={class:"dialog-body"},Ge={class:"card-table"},be=(0,i._)("div",{class:"card-table-row"},[(0,i._)("div",{class:"left-view"},"参数名"),(0,i._)("div",{class:"right-view"},"选择实际偏离")],-1),Fe={class:"left-view"},ke={class:"right-view"},We=(0,i._)("span",null,"偏低",-1),Le=(0,i._)("span",{class:"icon-low"},null,-1),Ce=(0,i._)("span",null,"正常",-1),Ve=(0,i._)("span",{class:"icon-normal"},null,-1),ye=(0,i._)("span",null,"偏高",-1),De=(0,i._)("span",{class:"icon-high"},null,-1),Ue={class:"dialog-footer"},Se=(0,i.Uk)("取消"),xe=(0,i.Uk)("保存"),Me={class:"dialog-body"},Ie=(0,i.Uk)(" 点击上传视频 "),Pe={class:"dialog-footer"},Ne=(0,i.Uk)("取消"),Te=(0,i.Uk)("保存"),Be={class:"dialog-body"},$e=(0,i.Uk)(" 点击上传视频 "),ze={class:"dialog-footer"},Ae=(0,i.Uk)("取消"),Ke=(0,i.Uk)("保存");function Ye(e,l,t,Ye,je,He){const Re=(0,i.up)("el-page-header"),qe=(0,i.up)("el-input"),Ee=(0,i.up)("el-form-item"),Oe=(0,i.up)("el-option"),Qe=(0,i.up)("el-select"),Xe=(0,i.up)("el-form"),Ze=(0,i.up)("el-button"),Je=(0,i.up)("Edit"),el=(0,i.up)("el-icon"),ll=(0,i.up)("Delete"),tl=(0,i.up)("el-image"),il=(0,i.up)("el-table-column"),al=(0,i.up)("el-table"),sl=(0,i.up)("Camera"),ol=(0,i.up)("el-upload"),dl=(0,i.up)("el-input-number"),rl=(0,i.up)("Plus"),ul=(0,i.up)("Minus"),nl=(0,i.up)("el-dialog"),ml=(0,i.up)("WarningFilled");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(Re,{onBack:He.goBack},{title:(0,i.w5)((()=>[o])),content:(0,i.w5)((()=>[d])),_:1},8,["onBack"]),(0,i._)("div",r,[(0,i.Wm)(Xe,{inline:!0,model:je.form,class:"form"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ee,{label:"种植类型"},{default:(0,i.w5)((()=>[(0,i.Wm)(qe,{modelValue:je.form.categoryTitle,"onUpdate:modelValue":l[0]||(l[0]=e=>je.form.categoryTitle=e),placeholder:"请输入种植类型"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Ee,{label:"种植品种"},{default:(0,i.w5)((()=>[(0,i.Wm)(qe,{modelValue:je.form.varietyTitle,"onUpdate:modelValue":l[1]||(l[1]=e=>je.form.varietyTitle=e),placeholder:"请输入种植品种"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Ee,{label:"培育方式"},{default:(0,i.w5)((()=>[(0,i.Wm)(Qe,{modelValue:je.form.growthId,"onUpdate:modelValue":l[2]||(l[2]=e=>je.form.growthId=e),placeholder:"请选择培育方式"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(je.growthTypeList,(e=>((0,i.wg)(),(0,i.j4)(Oe,{label:e.title,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,i._)("div",u,[(0,i._)("div",n,[m,(0,i._)("div",c,[(0,i.Wm)(Ze,{plain:"",type:"primary",icon:"CirclePlus",onClick:l[3]||(l[3]=e=>He.openAddGrowthStageDialog(null))},{default:(0,i.w5)((()=>[g])),_:1})])]),(0,i._)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(je.growthStageList,((e,l)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,a.C_)(["card-item",{"card-item-active":l===je.selectedGrowthStageIndex}]),key:l,onClick:e=>He.selectGrowthStage(l)},[(0,i._)("div",w,[(0,i._)("div",v,[(0,i._)("div",f,"阶段"+(0,a.zw)(l+1)+"："+(0,a.zw)(e.phaseName),1),(0,i._)("div",_,[(0,i.Wm)(el,{class:"icon",onClick:l=>He.openAddGrowthStageDialog(e,l)},{default:(0,i.w5)((()=>[(0,i.Wm)(Je)])),_:2},1032,["onClick"]),(0,i.Wm)(el,{class:"icon",onClick:e=>He.delGrowthStage(l,e)},{default:(0,i.w5)((()=>[(0,i.Wm)(ll)])),_:2},1032,["onClick"])])]),(0,i._)("div",G,[(0,i.Wm)(tl,{class:"img",src:e.image,fit:"cover"},null,8,["src"])])]),(0,i._)("div",b,[F,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.growPlantModelDetailBos,((e,l)=>((0,i.wg)(),(0,i.iD)("div",{class:"card-table-row",key:l},[(0,i._)("div",k,(0,a.zw)(e.parameterName),1),(0,i._)("div",W,(0,a.zw)(e.leastValue)+"-"+(0,a.zw)(e.maxValue)+(0,a.zw)(e.unit),1)])))),128))])],10,p)))),128))])]),(0,i._)("div",L,[(0,i._)("div",C,[V,(0,i._)("div",y,[(0,i.Wm)(Ze,{plain:"",type:"primary",icon:"CirclePlus",onClick:l[4]||(l[4]=e=>He.openPlantSuggestion(null))},{default:(0,i.w5)((()=>[D])),_:1})])]),(0,i.Wm)(al,{class:"section-table",data:He.tableData},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(je.standardList,((e,l)=>((0,i.wg)(),(0,i.j4)(il,{key:l,label:e.parameterName,width:"120"},{default:(0,i.w5)((l=>[(0,i._)("span",null,(0,a.zw)(He.getStatusText(l.row[e.parameterName])),1)])),_:2},1032,["label"])))),128)),(0,i.Wm)(il,{label:"操作"},{default:(0,i.w5)((e=>[(0,i._)("div",U,[(0,i.Wm)(el,{class:"icon",onClick:l=>He.openPlantSuggestion(e.row)},{default:(0,i.w5)((()=>[(0,i.Wm)(Je)])),_:2},1032,["onClick"]),(0,i.Wm)(el,{class:"icon",onClick:l=>He.delPlantSuggestion(e.$index)},{default:(0,i.w5)((()=>[(0,i.Wm)(ll)])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])]),(0,i._)("div",S,[(0,i._)("div",x,[M,(0,i._)("div",I,[(0,i.Wm)(Ze,{plain:"",type:"primary",icon:"CirclePlus",onClick:l[5]||(l[5]=e=>He.openFarmGuideDialog(null))},{default:(0,i.w5)((()=>[P])),_:1})])]),(0,i._)("div",N,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(je.farmGuideList,((e,l)=>((0,i.wg)(),(0,i.iD)("div",{class:"guide-item",key:l},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.imgList,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"guide-item-img",key:t.url},[(0,i.Wm)(tl,{class:"img",src:t.url,fit:"cover"},null,8,["src"]),T,(0,i._)("div",B,[(0,i.Wm)(el,{class:"icon",onClick:l=>He.openFarmGuideDialog(e)},{default:(0,i.w5)((()=>[(0,i.Wm)(Je)])),_:2},1032,["onClick"]),(0,i.Wm)(el,{class:"icon",onClick:e=>He.delFarmGuide(l)},{default:(0,i.w5)((()=>[(0,i.Wm)(ll)])),_:2},1032,["onClick"])])])))),128)),(0,i._)("div",$,(0,a.zw)(e.title),1),(0,i._)("div",z,(0,a.zw)(e.text),1)])))),128))])]),(0,i._)("div",A,[(0,i._)("div",K,[Y,(0,i._)("div",j,[(0,i.Wm)(Ze,{plain:"",type:"primary",icon:"CirclePlus",onClick:l[6]||(l[6]=e=>He.openCureGuideDialog(null))},{default:(0,i.w5)((()=>[H])),_:1})])]),(0,i._)("div",R,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(je.cureGuideList,((e,l)=>((0,i.wg)(),(0,i.iD)("div",{class:"guide-item",key:l},[(0,i._)("div",q,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.imgList,(e=>((0,i.wg)(),(0,i.j4)(tl,{class:"img",src:e.url,fit:"cover",key:e.url},null,8,["src"])))),128)),E,(0,i._)("div",O,[(0,i.Wm)(el,{class:"icon",onClick:l=>He.openCureGuideDialog(e)},{default:(0,i.w5)((()=>[(0,i.Wm)(Je)])),_:2},1032,["onClick"]),(0,i.Wm)(el,{class:"icon",onClick:e=>He.delCureGuide(l)},{default:(0,i.w5)((()=>[(0,i.Wm)(ll)])),_:2},1032,["onClick"])])]),(0,i._)("div",Q,(0,a.zw)(e.title),1),(0,i._)("div",X,(0,a.zw)(e.text),1)])))),128))])])]),(0,i._)("div",Z,[(0,i.Wm)(Ze,{plain:"",onClick:He.goBack},{default:(0,i.w5)((()=>[J])),_:1},8,["onClick"]),(0,i.Wm)(Ze,{class:"btn-save",type:"primary",onClick:He.savePlantModel},{default:(0,i.w5)((()=>[ee])),_:1},8,["onClick"])]),(0,i.Wm)(nl,{modelValue:je.visibleForModel,"onUpdate:modelValue":l[9]||(l[9]=e=>je.visibleForModel=e),title:"添加生长阶段",width:"50%",onClose:He.closeAddGrowthStageDialog},{footer:(0,i.w5)((()=>[(0,i._)("span",ne,[(0,i.Wm)(Ze,{onClick:He.closeAddGrowthStageDialog},{default:(0,i.w5)((()=>[me])),_:1},8,["onClick"]),(0,i.Wm)(Ze,{type:"primary",onClick:He.saveGrowthStage},{default:(0,i.w5)((()=>[ce])),_:1},8,["onClick"])])])),default:(0,i.w5)((()=>[(0,i._)("div",le,[(0,i.Wm)(Xe,{model:je.modelForm,"label-width":"80px","label-suffix":":"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ee,{label:"阶段名称"},{default:(0,i.w5)((()=>[(0,i.Wm)(qe,{modelValue:je.modelForm.phaseName,"onUpdate:modelValue":l[7]||(l[7]=e=>je.modelForm.phaseName=e),clearable:"",placeholder:"请输入阶段名称",maxlength:64},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Ee,{label:"参考图"},{default:(0,i.w5)((()=>[(0,i.Wm)(ol,{"file-list":je.modelForm.imgList,"onUpdate:file-list":l[8]||(l[8]=e=>je.modelForm.imgList=e),action:je.uploadUrl,"list-type":"picture-card",limit:1},{default:(0,i.w5)((()=>[(0,i.Wm)(el,null,{default:(0,i.w5)((()=>[(0,i.Wm)(sl)])),_:1}),te])),_:1},8,["file-list","action"])])),_:1}),(0,i.Wm)(Ee,{label:"参考指标"}),(0,i._)("div",ie,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(je.modelForm.growPlantModelDetailBos,((e,l)=>((0,i.wg)(),(0,i.iD)("div",{class:"standard-item",key:l},[(0,i._)("div",ae,[se,(0,i.Wm)(qe,{class:"input",modelValue:e.parameterName,"onUpdate:modelValue":l=>e.parameterName=l,readonly:0===l,placeholder:"请输入名称"},null,8,["modelValue","onUpdate:modelValue","readonly"])]),(0,i._)("div",oe,[de,(0,i.Wm)(dl,{class:"input-number",modelValue:e.leastValue,"onUpdate:modelValue":l=>e.leastValue=l,min:0,controls:!1,placeholder:"最小值"},null,8,["modelValue","onUpdate:modelValue"]),re,(0,i.Wm)(dl,{class:"input-number",modelValue:e.maxValue,"onUpdate:modelValue":l=>e.maxValue=l,min:0,controls:!1,placeholder:"最大值"},null,8,["modelValue","onUpdate:modelValue"]),(0,i.Wm)(qe,{class:"input-unit",modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,placeholder:"输入单位"},null,8,["modelValue","onUpdate:modelValue"])]),(0,i._)("div",ue,[0===l?((0,i.wg)(),(0,i.j4)(el,{key:0,class:"icon",onClick:He.addStandard},{default:(0,i.w5)((()=>[(0,i.Wm)(rl)])),_:1},8,["onClick"])):(0,i.kq)("",!0),0!==l?((0,i.wg)(),(0,i.j4)(el,{key:1,class:"icon",onClick:e=>He.delStandard(l)},{default:(0,i.w5)((()=>[(0,i.Wm)(ul)])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])])),_:1},8,["model"])])])),_:1},8,["modelValue","onClose"]),(0,i.Wm)(nl,{modelValue:je.visibleForDelModel,"onUpdate:modelValue":l[11]||(l[11]=e=>je.visibleForDelModel=e),title:"删除生长阶段",width:"40%"},{footer:(0,i.w5)((()=>[(0,i._)("span",we,[(0,i.Wm)(Ze,{onClick:l[10]||(l[10]=e=>je.visibleForDelModel=!1)},{default:(0,i.w5)((()=>[ve])),_:1}),(0,i.Wm)(Ze,{type:"primary",onClick:e.confirm},{default:(0,i.w5)((()=>[fe])),_:1},8,["onClick"])])])),default:(0,i.w5)((()=>[(0,i._)("div",ge,[(0,i._)("div",he,[(0,i.Wm)(el,null,{default:(0,i.w5)((()=>[(0,i.Wm)(ml)])),_:1})]),pe])])),_:1},8,["modelValue"]),(0,i.Wm)(nl,{modelValue:je.visibleForSuggestion,"onUpdate:modelValue":l[13]||(l[13]=e=>je.visibleForSuggestion=e),title:"添加种植建议",width:"50%"},{footer:(0,i.w5)((()=>[(0,i._)("span",Ue,[(0,i.Wm)(Ze,null,{default:(0,i.w5)((()=>[Se])),_:1}),(0,i.Wm)(Ze,{type:"primary",onClick:He.savePlantSuggestion},{default:(0,i.w5)((()=>[xe])),_:1},8,["onClick"])])])),default:(0,i.w5)((()=>[(0,i._)("div",_e,[(0,i._)("div",Ge,[be,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(je.standardList,((e,l)=>((0,i.wg)(),(0,i.iD)("div",{class:"card-table-row",key:l},[(0,i._)("div",Fe,(0,a.zw)(e.parameterName),1),(0,i._)("div",ke,[(0,i.Wm)(Qe,{class:"select",modelValue:e.status,"onUpdate:modelValue":l=>e.status=l,placeholder:"请选择"},{default:(0,i.w5)((()=>[(0,i.Wm)(Oe,{class:"low",label:"偏低",value:0},{default:(0,i.w5)((()=>[We,Le])),_:1}),(0,i.Wm)(Oe,{class:"normal",label:"正常",value:1},{default:(0,i.w5)((()=>[Ce,Ve])),_:1}),(0,i.Wm)(Oe,{class:"high",label:"偏高",value:2},{default:(0,i.w5)((()=>[ye,De])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])])])))),128))]),(0,i.Wm)(Xe,{model:je.suggestionForm,"label-width":"100px","label-position":"top","label-suffix":":"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ee,{label:"种植建议"},{default:(0,i.w5)((()=>[(0,i.Wm)(qe,{modelValue:je.suggestionForm.suggestion,"onUpdate:modelValue":l[12]||(l[12]=e=>je.suggestionForm.suggestion=e),clearable:"",autosize:{minRows:3,maxRows:5},placeholder:"增加光照，降低温度…",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue"]),(0,i.Wm)(nl,{modelValue:je.visibleForFarmGuide,"onUpdate:modelValue":l[17]||(l[17]=e=>je.visibleForFarmGuide=e),title:"添加农事指导",width:"50%",onClose:He.closeFarmGuideDialog},{footer:(0,i.w5)((()=>[(0,i._)("span",Pe,[(0,i.Wm)(Ze,{onClick:He.closeFarmGuideDialog},{default:(0,i.w5)((()=>[Ne])),_:1},8,["onClick"]),(0,i.Wm)(Ze,{type:"primary",onClick:He.saveFarmGuide},{default:(0,i.w5)((()=>[Te])),_:1},8,["onClick"])])])),default:(0,i.w5)((()=>[(0,i._)("div",Me,[(0,i.Wm)(Xe,{model:je.farmGuideForm,"label-width":"100px","label-suffix":":"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ee,{label:"参考视频"},{default:(0,i.w5)((()=>[(0,i.Wm)(ol,{"file-list":je.farmGuideForm.imgList,"onUpdate:file-list":l[14]||(l[14]=e=>je.farmGuideForm.imgList=e),action:je.uploadUrl,"list-type":"picture-card"},{default:(0,i.w5)((()=>[(0,i.Wm)(el,null,{default:(0,i.w5)((()=>[(0,i.Wm)(sl)])),_:1}),Ie])),_:1},8,["file-list","action"])])),_:1}),(0,i.Wm)(Ee,{label:"标题"},{default:(0,i.w5)((()=>[(0,i.Wm)(qe,{modelValue:je.farmGuideForm.title,"onUpdate:modelValue":l[15]||(l[15]=e=>je.farmGuideForm.title=e),clearable:"",placeholder:"请输入指导标题"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Ee,{label:"内容标签"},{default:(0,i.w5)((()=>[(0,i.Wm)(qe,{modelValue:je.farmGuideForm.text,"onUpdate:modelValue":l[16]||(l[16]=e=>je.farmGuideForm.text=e),clearable:"",autosize:{minRows:3,maxRows:5},placeholder:"如：#增加光照",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue","onClose"]),(0,i.Wm)(nl,{modelValue:je.visibleForCureGuide,"onUpdate:modelValue":l[21]||(l[21]=e=>je.visibleForCureGuide=e),title:"添加病虫害防治知道",width:"50%",onClose:He.closeCureGuideDialog},{footer:(0,i.w5)((()=>[(0,i._)("span",ze,[(0,i.Wm)(Ze,{onClick:He.closeCureGuideDialog},{default:(0,i.w5)((()=>[Ae])),_:1},8,["onClick"]),(0,i.Wm)(Ze,{type:"primary",onClick:He.saveCureGuide},{default:(0,i.w5)((()=>[Ke])),_:1},8,["onClick"])])])),default:(0,i.w5)((()=>[(0,i._)("div",Be,[(0,i.Wm)(Xe,{model:je.cureGuideForm,"label-width":"100px","label-suffix":":"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ee,{label:"参考视频"},{default:(0,i.w5)((()=>[(0,i.Wm)(ol,{"file-list":je.cureGuideForm.imgList,"onUpdate:file-list":l[18]||(l[18]=e=>je.cureGuideForm.imgList=e),action:je.uploadUrl,"list-type":"picture-card"},{default:(0,i.w5)((()=>[(0,i.Wm)(el,null,{default:(0,i.w5)((()=>[(0,i.Wm)(sl)])),_:1}),$e])),_:1},8,["file-list","action"])])),_:1}),(0,i.Wm)(Ee,{label:"标题"},{default:(0,i.w5)((()=>[(0,i.Wm)(qe,{modelValue:je.cureGuideForm.title,"onUpdate:modelValue":l[19]||(l[19]=e=>je.cureGuideForm.title=e),clearable:"",placeholder:"请输入指导标题"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Ee,{label:"内容标签"},{default:(0,i.w5)((()=>[(0,i.Wm)(qe,{modelValue:je.cureGuideForm.text,"onUpdate:modelValue":l[20]||(l[20]=e=>je.cureGuideForm.text=e),clearable:"",autosize:{minRows:3,maxRows:5},placeholder:"如：#增加光照",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue","onClose"])])}var je=t(512),He={name:"Add",data(){return{plantModelId:"",uploadUrl:je.P_,growthTypeList:[],form:{categoryTitle:"",varietyTitle:"",growthId:""},growthStageList:[],selectedGrowthStageIndex:-1,standardList:[],tableList:[],modelForm:{id:0,phaseName:"",imgList:[],growPlantModelDetailBos:[{parameterName:"种植天数",leastValue:void 0,maxValue:void 0,unit:""}]},visibleForModel:!1,visibleForDelModel:!1,visibleForSuggestion:!1,suggestionForm:{suggestion:""},visibleForFarmGuide:!1,farmGuideForm:{id:0,imgList:[],title:"",text:""},farmGuideList:[],visibleForCureGuide:!1,cureGuideForm:{id:0,imgList:[],title:"",text:""},cureGuideList:[]}},computed:{tableData(){let e=[];return this.tableList.forEach((l=>{l.growPlantAdviseDetailBos&&l.growPlantAdviseDetailBos.forEach((e=>{l[e.parameterName]=e.status})),e.push(l)})),e}},mounted(){this.plantModelId=this.$route.query.id,this.getGrowthTypeList(),this.plantModelId&&(this.getPlantModelDetail(),this.getGrowthStageList().then((()=>{this.getStandardList()})),this.getPlantSuggestionList(),this.getFarmGuideList(),this.getCureGuideList())},methods:{getGrowthTypeList(){const e={};(0,je.Ne)(e).then((e=>{e&&e.data&&(this.growthTypeList=e.data)}))},goBack(){this.$router.back()},getPlantModelDetail(){const e={id:this.plantModelId};return(0,je.oQ)(e).then((e=>{e&&e.data&&(this.form={categoryTitle:e.data.categoryTitle,varietyTitle:e.data.varietyTitle,growthId:e.data.growthId})}))},getGrowthStageList(){const e={id:this.plantModelId};return(0,je.bA)(e).then((e=>{e&&e.data&&(this.growthStageList=e.data)}))},getPlantSuggestionList(){const e={id:this.plantModelId};return(0,je.FK)(e).then((e=>{e&&e.data&&(this.tableList=e.data)}))},getFarmGuideList(){const e={id:this.plantModelId};return(0,je.Ly)(e).then((e=>{e&&e.data&&(this.farmGuideList=e.data.map((e=>(e.imgList=[{url:e.video,response:{data:{imageUrl:e.video}}}],e))))}))},getCureGuideList(){const e={id:this.plantModelId};return(0,je.w7)(e).then((e=>{e&&e.data&&(this.cureGuideList=e.data.map((e=>(e.imgList=[{url:e.video,response:{data:{imageUrl:e.video}}}],e))))}))},selectGrowthStage(e){this.selectedGrowthStageIndex=e},openAddGrowthStageDialog(e,l){l&&l.stopPropagation(),e&&(this.modelForm={id:e.id,phaseName:e.phaseName,imgList:[{url:e.image,response:{data:{imageUrl:e.image}}}],growPlantModelDetailBos:e.growPlantModelDetailBos.map((e=>({...e})))}),this.visibleForModel=!0},closeAddGrowthStageDialog(){this.visibleForModel=!1,this.modelForm={id:0,phaseName:"",imgList:[],growPlantModelDetailBos:[{parameterName:"种植天数",leastValue:void 0,maxValue:void 0,unit:""}]}},delGrowthStage(e,l){l.stopPropagation(),this.growthStageList.splice(e,1)},addStandard(){this.modelForm.growPlantModelDetailBos.push({name:"",min:void 0,max:void 0,unit:""})},delStandard(e){this.modelForm.growPlantModelDetailBos.splice(e,1)},saveGrowthStage(){const e={createName:"",growModelId:this.plantModelId,growPlantModelDetailBos:this.modelForm.growPlantModelDetailBos,id:this.modelForm.id,image:"",phaseName:this.modelForm.phaseName};if(this.modelForm.imgList[0]){const l=this.modelForm.imgList[0].response;e.image=l&&l.data&&l.data.imageUrl}return(0,je.lb)(e).then((e=>{if(e&&"200"===e.code){this.$message.success("保存成功");const l=this.growthStageList.findIndex((l=>l.id===e.data.id));-1!==l?this.growthStageList.splice(l,1,e.data):this.growthStageList.push(e.data),this.closeAddGrowthStageDialog()}else this.$message.error(e.message||"保存失败")}))},getStandardList(){if(0===this.growthStageList.length)return;const e={growPlantId:this.growthStageList.map((e=>e.id)).join(",")};return(0,je.nX)(e).then((e=>{e&&e.data?this.standardList=e.data.map((e=>({parameterName:e.title,status:1}))):this.$message.error(e.message||"获取参数列表失败")}))},openPlantSuggestion(e){0!==this.growthStageList.length?this.getStandardList().then((()=>{e&&(this.suggestionForm={id:e.id,suggestion:e.text},this.standardList=e.growPlantAdviseDetailBos),this.visibleForSuggestion=!0})):this.$message.warning("请先添加生长阶段")},closePlantSuggestion(){this.visibleForSuggestion=!1,this.suggestionForm={suggestion:""}},delPlantSuggestion(e){this.tableList.splice(e,1)},savePlantSuggestion(){const e={createName:"",growModelId:this.plantModelId,growPlantAdviseDetailBos:this.standardList,id:this.suggestionForm.id,text:this.suggestionForm.suggestion};return(0,je.oY)(e).then((e=>{if(e&&"200"===e.code){this.$message.success("保存成功");const l=this.tableList.findIndex((e=>e.id===this.suggestionForm.id));-1===l?this.tableList.push(e.data):this.tableList.splice(l,1,e.data),this.closePlantSuggestion()}else this.$message.error(e.message||"保存失败")}))},openFarmGuideDialog(e){e&&(this.farmGuideForm=e),this.visibleForFarmGuide=!0},closeFarmGuideDialog(){this.visibleForFarmGuide=!1,this.farmGuideForm={id:0,imgList:[],title:"",text:""}},delFarmGuide(e){this.farmGuideList.splice(e,1)},saveFarmGuide(){const e={growModelId:this.plantModelId,id:this.farmGuideForm.id,text:this.farmGuideForm.text,title:this.farmGuideForm.title,video:""};if(this.farmGuideForm.imgList[0]){const l=this.farmGuideForm.imgList[0].response;e.video=l&&l.data&&l.data.imageUrl}return(0,je._h)(e).then((e=>{if(e&&"200"===e.code){this.$message.success("保存成功");const l=this.farmGuideList.findIndex((e=>e.id===this.farmGuideForm.id));-1===l?this.farmGuideList.push({...e.data,imgList:[{url:e.data.video,response:{data:{imageUrl:e.data.video}}}]}):this.farmGuideList.splice(l,1,e.data),this.closeFarmGuideDialog()}else this.$message.error(e.message||"保存失败")}))},openCureGuideDialog(e){e&&(this.cureGuideForm=e),this.visibleForCureGuide=!0},closeCureGuideDialog(){this.visibleForCureGuide=!1,this.cureGuideForm={id:0,imgList:[],title:"",text:""}},saveCureGuide(){const e={growModelId:this.plantModelId,id:this.cureGuideForm.id,text:this.cureGuideForm.text,title:this.cureGuideForm.title,video:""};if(this.cureGuideForm.imgList[0]){const l=this.cureGuideForm.imgList[0].response;e.video=l&&l.data&&l.data.imageUrl}return(0,je.q4)(e).then((e=>{if(e&&"200"===e.code){this.$message.success("保存成功");const l=this.cureGuideList.findIndex((e=>e.id===this.cureGuideForm.id));-1===l?this.cureGuideList.push({...e.data,imgList:[{url:e.data.video,response:{data:{imageUrl:e.data.video}}}]}):this.cureGuideList.splice(l,1,e.data),this.closeCureGuideDialog()}else this.$message.error(e.message||"保存失败")}))},delCureGuide(e){this.cureGuideList.splice(e,1)},savePlantModel(){const e={categoryTitle:this.form.categoryTitle,growAdviseIds:"",growModelIds:"",growOperationGuideIds:"",growPreventionGuideIds:"",growthId:this.form.growthId,growthName:"",id:this.plantModelId,varietyTitle:this.form.varietyTitle},l=this.growthTypeList.find((e=>e.id===this.form.growthId));return e.growthName=l&&l.title,this.growthStageList.length>0&&(e.growModelIds=this.growthStageList.map((e=>e.id)).join(",")),this.tableList.length>0&&(e.growAdviseIds=this.tableList.map((e=>e.id)).join(",")),this.farmGuideList.length>0&&(e.growOperationGuideIds=this.farmGuideList.map((e=>e.id)).join(",")),this.cureGuideList.length>0&&(e.growPreventionGuideIds=this.cureGuideList.map((e=>e.id)).join(",")),(0,je.lF)(e).then((e=>{e&&"200"===e.code?(this.$message.success("保存成功"),this.$router.back()):this.$message.error(e.message||"保存失败")}))},getStatusText(e){const l=[{label:"偏低",value:0},{label:"正常",value:1},{label:"偏高",value:2}],t=l.find((l=>l.value===e));return t?t.label:e}}},Re=t(3744);const qe=(0,Re.Z)(He,[["render",Ye]]);var Ee=qe}}]);
//# sourceMappingURL=824.60fac481.js.map